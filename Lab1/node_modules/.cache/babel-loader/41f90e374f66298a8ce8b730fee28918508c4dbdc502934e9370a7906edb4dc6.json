{"ast":null,"code":"import _toConsumableArray from \"@babel/runtime/helpers/toConsumableArray\";\nimport _defineProperty from \"@babel/runtime/helpers/defineProperty\";\nimport _slicedToArray from \"@babel/runtime/helpers/slicedToArray\";\nfunction ownKeys(a, b) {\n  var c = Object.keys(a);\n  if (Object.getOwnPropertySymbols) {\n    var d = Object.getOwnPropertySymbols(a);\n    b && (d = d.filter(function (b) {\n      return Object.getOwnPropertyDescriptor(a, b).enumerable;\n    })), c.push.apply(c, d);\n  }\n  return c;\n}\nfunction _objectSpread(a) {\n  for (var b, c = 1; c < arguments.length; c++) b = null == arguments[c] ? {} : arguments[c], c % 2 ? ownKeys(Object(b), !0).forEach(function (c) {\n    _defineProperty(a, c, b[c]);\n  }) : Object.getOwnPropertyDescriptors ? Object.defineProperties(a, Object.getOwnPropertyDescriptors(b)) : ownKeys(Object(b)).forEach(function (c) {\n    Object.defineProperty(a, c, Object.getOwnPropertyDescriptor(b, c));\n  });\n  return a;\n}\nimport React, { useCallback, useEffect, useRef } from \"react\";\nimport { useAnnotation, useStore } from \"../../../hooks\";\nimport { TOOLS_IDS } from \"../../../utils/constants\";\nimport AnnotationOptions from \"../../common/AnnotationOptions\";\nimport getPointerOffsetPositionBoundedToObject from \"../../../utils/getPointerOffsetPositionBoundedToObject\";\nimport randomId from \"../../../utils/randomId\";\nimport { SELECT_ANNOTATION, SET_ANNOTATION } from \"../../../actions\";\nimport getElemDocumentCoords from \"../../../utils/getElemDocumentCoords\";\nvar eventsOptions = {\n    passive: !0\n  },\n  PenOptions = function (a) {\n    var b = a.t,\n      c = useStore(),\n      d = c.dispatch,\n      e = c.designLayer,\n      f = c.previewGroup,\n      g = c.config,\n      h = useAnnotation(_objectSpread(_objectSpread(_objectSpread({}, g.annotationsCommon), g[TOOLS_IDS.PEN]), {}, {\n        name: TOOLS_IDS.PEN\n      }), !1),\n      i = _slicedToArray(h, 3),\n      j = i[0],\n      k = i[1],\n      l = i[2],\n      m = useRef(null),\n      n = useRef({\n        points: [],\n        moved: !1,\n        id: \"\"\n      }),\n      o = useCallback(function () {\n        var a = getElemDocumentCoords(m.current.content),\n          b = getPointerOffsetPositionBoundedToObject(f, a);\n        return [b.offsetX - (e.attrs.xPadding || 0), b.offsetY - (e.attrs.yPadding || 0)];\n      }, [e]),\n      p = useCallback(function () {\n        n.current.moved ? (n.current.points = n.current.points.concat(o()), d({\n          type: SET_ANNOTATION,\n          payload: {\n            id: n.current.id,\n            points: n.current.points,\n            dismissHistory: !0\n          }\n        })) : (n.current = {\n          moved: !0,\n          id: randomId(TOOLS_IDS.PEN),\n          points: [].concat(_toConsumableArray(n.current.points), _toConsumableArray(o()))\n        }, l({\n          id: n.current.id,\n          name: TOOLS_IDS.PEN,\n          points: n.current.points\n        }));\n      }, [o]),\n      q = useCallback(function () {\n        n.current.id && d({\n          type: SELECT_ANNOTATION,\n          payload: {\n            annotationId: n.current.id\n          }\n        }), n.current = null, m.current.off(\"mousemove touchmove\", p), m.current.off(\"mouseleave touchcancel\", q), document.removeEventListener(\"mouseup\", q, eventsOptions), document.removeEventListener(\"touchend\", q, eventsOptions), document.removeEventListener(\"mouseleave\", q, eventsOptions), document.removeEventListener(\"touchcancel\", q, eventsOptions);\n      }, [p]),\n      r = useCallback(function (a) {\n        a.target.attrs.draggable || (a.evt.preventDefault(), n.current = {\n          points: o()\n        }, m.current.on(\"mousemove touchmove\", p), m.current.on(\"mouseleave touchcancel\", q), document.addEventListener(\"mouseup\", q, eventsOptions), document.addEventListener(\"touchend\", q, eventsOptions), document.addEventListener(\"mouseleave\", q, eventsOptions), document.addEventListener(\"touchcancel\", q, eventsOptions));\n      }, [o, p, q]);\n    return useEffect(function () {\n      return m.current = null === e || void 0 === e ? void 0 : e.getStage(), m.current && m.current.on(\"mousedown touchstart\", r), function () {\n        m.current && m.current.off(\"mousedown touchstart\", r);\n      };\n    }, [e]), React.createElement(AnnotationOptions, {\n      className: \"FIE_pen-tool-options\",\n      annotation: j,\n      updateAnnotation: k,\n      t: b,\n      hidePositionField: !0,\n      hideFillOption: !0\n    });\n  };\nexport default PenOptions;","map":{"version":3,"names":["_toConsumableArray","_defineProperty","_slicedToArray","ownKeys","a","b","c","Object","keys","getOwnPropertySymbols","d","filter","getOwnPropertyDescriptor","enumerable","push","apply","_objectSpread","arguments","length","forEach","getOwnPropertyDescriptors","defineProperties","defineProperty","React","useCallback","useEffect","useRef","useAnnotation","useStore","TOOLS_IDS","AnnotationOptions","getPointerOffsetPositionBoundedToObject","randomId","SELECT_ANNOTATION","SET_ANNOTATION","getElemDocumentCoords","eventsOptions","passive","PenOptions","t","dispatch","e","designLayer","f","previewGroup","g","config","h","annotationsCommon","PEN","name","i","j","k","l","m","n","points","moved","id","o","current","content","offsetX","attrs","xPadding","offsetY","yPadding","p","concat","type","payload","dismissHistory","q","annotationId","off","document","removeEventListener","r","target","draggable","evt","preventDefault","on","addEventListener","getStage","createElement","className","annotation","updateAnnotation","hidePositionField","hideFillOption"],"sources":["/home/redundunt/WebstormProjects/untitled/node_modules/react-filerobot-image-editor/lib/components/tools/Pen/PenOptions.js"],"sourcesContent":["import _toConsumableArray from\"@babel/runtime/helpers/toConsumableArray\";import _defineProperty from\"@babel/runtime/helpers/defineProperty\";import _slicedToArray from\"@babel/runtime/helpers/slicedToArray\";function ownKeys(a,b){var c=Object.keys(a);if(Object.getOwnPropertySymbols){var d=Object.getOwnPropertySymbols(a);b&&(d=d.filter(function(b){return Object.getOwnPropertyDescriptor(a,b).enumerable})),c.push.apply(c,d)}return c}function _objectSpread(a){for(var b,c=1;c<arguments.length;c++)b=null==arguments[c]?{}:arguments[c],c%2?ownKeys(Object(b),!0).forEach(function(c){_defineProperty(a,c,b[c])}):Object.getOwnPropertyDescriptors?Object.defineProperties(a,Object.getOwnPropertyDescriptors(b)):ownKeys(Object(b)).forEach(function(c){Object.defineProperty(a,c,Object.getOwnPropertyDescriptor(b,c))});return a}import React,{useCallback,useEffect,useRef}from\"react\";import{useAnnotation,useStore}from\"../../../hooks\";import{TOOLS_IDS}from\"../../../utils/constants\";import AnnotationOptions from\"../../common/AnnotationOptions\";import getPointerOffsetPositionBoundedToObject from\"../../../utils/getPointerOffsetPositionBoundedToObject\";import randomId from\"../../../utils/randomId\";import{SELECT_ANNOTATION,SET_ANNOTATION}from\"../../../actions\";import getElemDocumentCoords from\"../../../utils/getElemDocumentCoords\";var eventsOptions={passive:!0},PenOptions=function(a){var b=a.t,c=useStore(),d=c.dispatch,e=c.designLayer,f=c.previewGroup,g=c.config,h=useAnnotation(_objectSpread(_objectSpread(_objectSpread({},g.annotationsCommon),g[TOOLS_IDS.PEN]),{},{name:TOOLS_IDS.PEN}),!1),i=_slicedToArray(h,3),j=i[0],k=i[1],l=i[2],m=useRef(null),n=useRef({points:[],moved:!1,id:\"\"}),o=useCallback(function(){var a=getElemDocumentCoords(m.current.content),b=getPointerOffsetPositionBoundedToObject(f,a);return[b.offsetX-(e.attrs.xPadding||0),b.offsetY-(e.attrs.yPadding||0)]},[e]),p=useCallback(function(){n.current.moved?(n.current.points=n.current.points.concat(o()),d({type:SET_ANNOTATION,payload:{id:n.current.id,points:n.current.points,dismissHistory:!0}})):(n.current={moved:!0,id:randomId(TOOLS_IDS.PEN),points:[].concat(_toConsumableArray(n.current.points),_toConsumableArray(o()))},l({id:n.current.id,name:TOOLS_IDS.PEN,points:n.current.points}))},[o]),q=useCallback(function(){n.current.id&&d({type:SELECT_ANNOTATION,payload:{annotationId:n.current.id}}),n.current=null,m.current.off(\"mousemove touchmove\",p),m.current.off(\"mouseleave touchcancel\",q),document.removeEventListener(\"mouseup\",q,eventsOptions),document.removeEventListener(\"touchend\",q,eventsOptions),document.removeEventListener(\"mouseleave\",q,eventsOptions),document.removeEventListener(\"touchcancel\",q,eventsOptions)},[p]),r=useCallback(function(a){a.target.attrs.draggable||(a.evt.preventDefault(),n.current={points:o()},m.current.on(\"mousemove touchmove\",p),m.current.on(\"mouseleave touchcancel\",q),document.addEventListener(\"mouseup\",q,eventsOptions),document.addEventListener(\"touchend\",q,eventsOptions),document.addEventListener(\"mouseleave\",q,eventsOptions),document.addEventListener(\"touchcancel\",q,eventsOptions))},[o,p,q]);return useEffect(function(){return m.current=null===e||void 0===e?void 0:e.getStage(),m.current&&m.current.on(\"mousedown touchstart\",r),function(){m.current&&m.current.off(\"mousedown touchstart\",r)}},[e]),React.createElement(AnnotationOptions,{className:\"FIE_pen-tool-options\",annotation:j,updateAnnotation:k,t:b,hidePositionField:!0,hideFillOption:!0})};export default PenOptions;"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}