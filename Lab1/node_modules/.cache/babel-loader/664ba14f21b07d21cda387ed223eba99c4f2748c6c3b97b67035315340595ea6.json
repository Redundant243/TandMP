{"ast":null,"code":"import _objectWithoutProperties from \"@babel/runtime/helpers/objectWithoutProperties\";\nimport _defineProperty from \"@babel/runtime/helpers/defineProperty\";\nvar _annotationsNamesToKo,\n  _excluded = [\"width\", \"height\", \"startedX\", \"startedY\"];\nfunction ownKeys(a, b) {\n  var c = Object.keys(a);\n  if (Object.getOwnPropertySymbols) {\n    var d = Object.getOwnPropertySymbols(a);\n    b && (d = d.filter(function (b) {\n      return Object.getOwnPropertyDescriptor(a, b).enumerable;\n    })), c.push.apply(c, d);\n  }\n  return c;\n}\nfunction _objectSpread(a) {\n  for (var b, c = 1; c < arguments.length; c++) b = null == arguments[c] ? {} : arguments[c], c % 2 ? ownKeys(Object(b), !0).forEach(function (c) {\n    _defineProperty(a, c, b[c]);\n  }) : Object.getOwnPropertyDescriptors ? Object.defineProperties(a, Object.getOwnPropertyDescriptors(b)) : ownKeys(Object(b)).forEach(function (c) {\n    Object.defineProperty(a, c, Object.getOwnPropertyDescriptor(b, c));\n  });\n  return a;\n}\nimport Konva from \"konva\";\nimport { TOOLS_IDS } from \"../../utils/constants\";\nvar annotationsNamesToKonvaClasses = (_annotationsNamesToKo = {}, _defineProperty(_annotationsNamesToKo, TOOLS_IDS.RECT, Konva.Rect), _defineProperty(_annotationsNamesToKo, TOOLS_IDS.ELLIPSE, Konva.Ellipse), _defineProperty(_annotationsNamesToKo, TOOLS_IDS.POLYGON, Konva.RegularPolygon), _defineProperty(_annotationsNamesToKo, TOOLS_IDS.LINE, Konva.Line), _defineProperty(_annotationsNamesToKo, TOOLS_IDS.IMAGE, Konva.Image), _defineProperty(_annotationsNamesToKo, TOOLS_IDS.TEXT, Konva.Text), _defineProperty(_annotationsNamesToKo, TOOLS_IDS.ARROW, Konva.Arrow), _annotationsNamesToKo),\n  ANNOTATIONS_WITH_POINTS = [TOOLS_IDS.LINE, TOOLS_IDS.ARROW];\nexport var NO_WIDTH_HEIGHT_ANNOTATIONS = [].concat(ANNOTATIONS_WITH_POINTS, [TOOLS_IDS.ELLIPSE, TOOLS_IDS.POLYGON]);\nvar getNewAnnotationPreview = function (a) {\n  var b, c, d;\n  return new annotationsNamesToKonvaClasses[a.name](_objectSpread(_objectSpread({}, a), {}, {\n    opacity: null !== (b = a.opacity) && void 0 !== b ? b : .7,\n    x: null !== (c = a.x) && void 0 !== c ? c : 0,\n    y: null !== (d = a.y) && void 0 !== d ? d : 0,\n    width: Math.abs(a.width) || 0,\n    height: Math.abs(a.height) || 0\n  }, ANNOTATIONS_WITH_POINTS.includes(a.name) ? {\n    stroke: a.stroke || \"#000000\"\n  } : {}));\n};\nexport var dimensToProperAnnotationDimens = function (a, b, c) {\n  var d = a.width,\n    e = a.height,\n    f = a.startedX,\n    g = a.startedY,\n    h = _objectWithoutProperties(a, _excluded),\n    i = Math.abs(d),\n    j = Math.abs(e),\n    k = 0 > d,\n    l = 0 > e;\n  switch (b) {\n    case TOOLS_IDS.RECT:\n      c ? (h.width = Math.sqrt(i * i + j * j), h.height = h.width, h.x -= k ? h.width - i : 0, h.y -= l ? h.height - j : 0) : (h.width = i, h.height = j);\n      break;\n    case TOOLS_IDS.ELLIPSE:\n      c ? (h.radiusX = Math.sqrt(i * i + j * j) / 2, h.radiusY = h.radiusX, h.x -= k ? 2 * h.radiusX - i : 0, h.y -= l ? 2 * h.radiusY - j : 0) : (h.radiusX = i / 2, h.radiusY = j / 2), h.offsetX = -h.radiusX, h.offsetY = -h.radiusY;\n      break;\n    case TOOLS_IDS.POLYGON:\n      h.radius = (i + j) / 2, h.x -= k ? 2 * h.radius - i : 0, h.y -= l ? 2 * h.radius - j : 0, h.offsetX = -h.radius, h.offsetY = -h.radius;\n      break;\n    case TOOLS_IDS.LINE:\n    case TOOLS_IDS.ARROW:\n      h.x = f, h.y = g, h.points = [0, 0], c ? h.points.push(i >= j ? d : 0, j > i ? e : 0) : h.points = [0, 0, d, e];\n      break;\n    default:\n      h.width = i, h.height = j;\n  }\n  return h;\n};\nexport default getNewAnnotationPreview;","map":{"version":3,"names":["_objectWithoutProperties","_defineProperty","_annotationsNamesToKo","_excluded","ownKeys","a","b","c","Object","keys","getOwnPropertySymbols","d","filter","getOwnPropertyDescriptor","enumerable","push","apply","_objectSpread","arguments","length","forEach","getOwnPropertyDescriptors","defineProperties","defineProperty","Konva","TOOLS_IDS","annotationsNamesToKonvaClasses","RECT","Rect","ELLIPSE","Ellipse","POLYGON","RegularPolygon","LINE","Line","IMAGE","Image","TEXT","Text","ARROW","Arrow","ANNOTATIONS_WITH_POINTS","NO_WIDTH_HEIGHT_ANNOTATIONS","concat","getNewAnnotationPreview","name","opacity","x","y","width","Math","abs","height","includes","stroke","dimensToProperAnnotationDimens","e","f","startedX","g","startedY","h","i","j","k","l","sqrt","radiusX","radiusY","offsetX","offsetY","radius","points"],"sources":["/home/redundunt/WebstormProjects/untitled/node_modules/react-filerobot-image-editor/lib/hooks/useAnnotation/getNewAnnotationPreview.js"],"sourcesContent":["import _objectWithoutProperties from\"@babel/runtime/helpers/objectWithoutProperties\";import _defineProperty from\"@babel/runtime/helpers/defineProperty\";var _annotationsNamesToKo,_excluded=[\"width\",\"height\",\"startedX\",\"startedY\"];function ownKeys(a,b){var c=Object.keys(a);if(Object.getOwnPropertySymbols){var d=Object.getOwnPropertySymbols(a);b&&(d=d.filter(function(b){return Object.getOwnPropertyDescriptor(a,b).enumerable})),c.push.apply(c,d)}return c}function _objectSpread(a){for(var b,c=1;c<arguments.length;c++)b=null==arguments[c]?{}:arguments[c],c%2?ownKeys(Object(b),!0).forEach(function(c){_defineProperty(a,c,b[c])}):Object.getOwnPropertyDescriptors?Object.defineProperties(a,Object.getOwnPropertyDescriptors(b)):ownKeys(Object(b)).forEach(function(c){Object.defineProperty(a,c,Object.getOwnPropertyDescriptor(b,c))});return a}import Konva from\"konva\";import{TOOLS_IDS}from\"../../utils/constants\";var annotationsNamesToKonvaClasses=(_annotationsNamesToKo={},_defineProperty(_annotationsNamesToKo,TOOLS_IDS.RECT,Konva.Rect),_defineProperty(_annotationsNamesToKo,TOOLS_IDS.ELLIPSE,Konva.Ellipse),_defineProperty(_annotationsNamesToKo,TOOLS_IDS.POLYGON,Konva.RegularPolygon),_defineProperty(_annotationsNamesToKo,TOOLS_IDS.LINE,Konva.Line),_defineProperty(_annotationsNamesToKo,TOOLS_IDS.IMAGE,Konva.Image),_defineProperty(_annotationsNamesToKo,TOOLS_IDS.TEXT,Konva.Text),_defineProperty(_annotationsNamesToKo,TOOLS_IDS.ARROW,Konva.Arrow),_annotationsNamesToKo),ANNOTATIONS_WITH_POINTS=[TOOLS_IDS.LINE,TOOLS_IDS.ARROW];export var NO_WIDTH_HEIGHT_ANNOTATIONS=[].concat(ANNOTATIONS_WITH_POINTS,[TOOLS_IDS.ELLIPSE,TOOLS_IDS.POLYGON]);var getNewAnnotationPreview=function(a){var b,c,d;return new annotationsNamesToKonvaClasses[a.name](_objectSpread(_objectSpread({},a),{},{opacity:null!==(b=a.opacity)&&void 0!==b?b:.7,x:null!==(c=a.x)&&void 0!==c?c:0,y:null!==(d=a.y)&&void 0!==d?d:0,width:Math.abs(a.width)||0,height:Math.abs(a.height)||0},ANNOTATIONS_WITH_POINTS.includes(a.name)?{stroke:a.stroke||\"#000000\"}:{}))};export var dimensToProperAnnotationDimens=function(a,b,c){var d=a.width,e=a.height,f=a.startedX,g=a.startedY,h=_objectWithoutProperties(a,_excluded),i=Math.abs(d),j=Math.abs(e),k=0>d,l=0>e;switch(b){case TOOLS_IDS.RECT:c?(h.width=Math.sqrt(i*i+j*j),h.height=h.width,h.x-=k?h.width-i:0,h.y-=l?h.height-j:0):(h.width=i,h.height=j);break;case TOOLS_IDS.ELLIPSE:c?(h.radiusX=Math.sqrt(i*i+j*j)/2,h.radiusY=h.radiusX,h.x-=k?2*h.radiusX-i:0,h.y-=l?2*h.radiusY-j:0):(h.radiusX=i/2,h.radiusY=j/2),h.offsetX=-h.radiusX,h.offsetY=-h.radiusY;break;case TOOLS_IDS.POLYGON:h.radius=(i+j)/2,h.x-=k?2*h.radius-i:0,h.y-=l?2*h.radius-j:0,h.offsetX=-h.radius,h.offsetY=-h.radius;break;case TOOLS_IDS.LINE:case TOOLS_IDS.ARROW:h.x=f,h.y=g,h.points=[0,0],c?h.points.push(i>=j?d:0,j>i?e:0):h.points=[0,0,d,e];break;default:h.width=i,h.height=j;}return h};export default getNewAnnotationPreview;"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}