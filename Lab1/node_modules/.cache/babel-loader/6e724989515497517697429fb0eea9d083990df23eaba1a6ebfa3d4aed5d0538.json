{"ast":null,"code":"import { useMemo, useCallback } from \"react\";\nimport { SET_ANNOTATION, SELECT_ANNOTATION, SELECT_TOOL } from \"../actions\";\nimport { TOOLS_IDS, TABS_IDS, WATERMARK_ANNOTATION_ID } from \"../utils/constants\";\nimport useStore from \"./useStore\";\nvar useAnnotationEvents = function () {\n  var a = useStore(),\n    b = a.tabId,\n    c = a.dispatch,\n    d = useMemo(function () {\n      return b !== TABS_IDS.ANNOTATE && b !== TABS_IDS.WATERMARK;\n    }, [b]),\n    f = useCallback(function (a) {\n      c({\n        type: SET_ANNOTATION,\n        payload: a\n      });\n    }, []),\n    g = useCallback(function (a) {\n      f({\n        id: a.target.id(),\n        x: a.target.x(),\n        y: a.target.y()\n      });\n    }, []),\n    h = useCallback(function (a) {\n      var b = {\n        id: a.target.id(),\n        rotation: a.target.rotation(),\n        x: a.target.x(),\n        y: a.target.y()\n      };\n      return a.target.name() === TOOLS_IDS.TEXT ? (b.width = a.target.width() * a.target.scaleX(), b.height = a.target.height() * a.target.scaleY(), b.scaleX = 1, b.scaleY = 1) : (b.scaleX = a.target.scaleX(), b.scaleY = a.target.scaleY()), b;\n    }, []),\n    i = useCallback(function (a) {\n      f(h(a));\n    }, []),\n    j = useCallback(function (a) {\n      a.target.name() === TOOLS_IDS.TEXT && a.target.setAttrs(h(a));\n    }),\n    k = useCallback(function (a) {\n      if (a.target.id() !== WATERMARK_ANNOTATION_ID) {\n        var b = a.evt.ctrlKey || a.evt.shiftKey || a.evt.metaKey;\n        c({\n          type: SELECT_ANNOTATION,\n          payload: {\n            annotationId: a.target.id(),\n            multiple: b\n          }\n        }), c({\n          type: SELECT_TOOL,\n          payload: {\n            toolId: a.target.name(),\n            keepSelections: b\n          }\n        });\n      }\n    }, []);\n  return useMemo(function () {\n    return d ? {} : {\n      onTransform: j,\n      onTransformEnd: i,\n      onDragEnd: g,\n      onClick: k,\n      onTap: k\n    };\n  }, [d]);\n};\nexport default useAnnotationEvents;","map":{"version":3,"names":["useMemo","useCallback","SET_ANNOTATION","SELECT_ANNOTATION","SELECT_TOOL","TOOLS_IDS","TABS_IDS","WATERMARK_ANNOTATION_ID","useStore","useAnnotationEvents","a","b","tabId","c","dispatch","d","ANNOTATE","WATERMARK","f","type","payload","g","id","target","x","y","h","rotation","name","TEXT","width","scaleX","height","scaleY","i","j","setAttrs","k","evt","ctrlKey","shiftKey","metaKey","annotationId","multiple","toolId","keepSelections","onTransform","onTransformEnd","onDragEnd","onClick","onTap"],"sources":["/home/redundunt/WebstormProjects/untitled/node_modules/react-filerobot-image-editor/lib/hooks/useAnnotationEvents.js"],"sourcesContent":["import{useMemo,useCallback}from\"react\";import{SET_ANNOTATION,SELECT_ANNOTATION,SELECT_TOOL}from\"../actions\";import{TOOLS_IDS,TABS_IDS,WATERMARK_ANNOTATION_ID}from\"../utils/constants\";import useStore from\"./useStore\";var useAnnotationEvents=function(){var a=useStore(),b=a.tabId,c=a.dispatch,d=useMemo(function(){return b!==TABS_IDS.ANNOTATE&&b!==TABS_IDS.WATERMARK},[b]),f=useCallback(function(a){c({type:SET_ANNOTATION,payload:a})},[]),g=useCallback(function(a){f({id:a.target.id(),x:a.target.x(),y:a.target.y()})},[]),h=useCallback(function(a){var b={id:a.target.id(),rotation:a.target.rotation(),x:a.target.x(),y:a.target.y()};return a.target.name()===TOOLS_IDS.TEXT?(b.width=a.target.width()*a.target.scaleX(),b.height=a.target.height()*a.target.scaleY(),b.scaleX=1,b.scaleY=1):(b.scaleX=a.target.scaleX(),b.scaleY=a.target.scaleY()),b},[]),i=useCallback(function(a){f(h(a))},[]),j=useCallback(function(a){a.target.name()===TOOLS_IDS.TEXT&&a.target.setAttrs(h(a))}),k=useCallback(function(a){if(a.target.id()!==WATERMARK_ANNOTATION_ID){var b=a.evt.ctrlKey||a.evt.shiftKey||a.evt.metaKey;c({type:SELECT_ANNOTATION,payload:{annotationId:a.target.id(),multiple:b}}),c({type:SELECT_TOOL,payload:{toolId:a.target.name(),keepSelections:b}})}},[]);return useMemo(function(){return d?{}:{onTransform:j,onTransformEnd:i,onDragEnd:g,onClick:k,onTap:k}},[d])};export default useAnnotationEvents;"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}