{"ast":null,"code":"import _defineProperty from \"@babel/runtime/helpers/defineProperty\";\nimport _slicedToArray from \"@babel/runtime/helpers/slicedToArray\";\nimport React, { useEffect, useState } from \"react\";\nimport Popper from \"@scaleflex/ui/core/popper\";\nimport { useStore } from \"../../../hooks\";\nimport { SET_LATEST_COLOR } from \"../../../actions\";\nimport { StyledColorPicker, StyledPickerTrigger } from \"./ColorInput.styled\";\nvar pinnedColorsKey = \"FIE_pinnedColors\",\n  ColorInput = function (a) {\n    var b,\n      c = a.position,\n      d = void 0 === c ? \"top\" : c,\n      e = a.onChange,\n      f = a.color,\n      g = a.colorFor,\n      h = useStore(),\n      i = h.selectionsIds,\n      j = void 0 === i ? [] : i,\n      k = h.config.annotationsCommon,\n      l = void 0 === k ? {} : k,\n      m = h.dispatch,\n      n = h.latestColors,\n      o = void 0 === n ? {} : n,\n      p = o[g],\n      q = useState(),\n      r = _slicedToArray(q, 2),\n      s = r[0],\n      t = r[1],\n      u = useState(function () {\n        return p || f || l.fill;\n      }),\n      v = _slicedToArray(u, 2),\n      w = v[0],\n      x = v[1],\n      y = useState(null !== (b = window) && void 0 !== b && b.localStorage ? JSON.parse(localStorage.getItem(pinnedColorsKey) || \"[]\") : []),\n      z = _slicedToArray(y, 2),\n      A = z[0],\n      B = z[1],\n      C = function (a) {\n        var b;\n        if (null !== (b = window) && void 0 !== b && b.localStorage) {\n          var c = window.localStorage.getItem(pinnedColorsKey);\n          if (JSON.stringify(a) !== c) {\n            var d = a.slice(-9);\n            window.localStorage.setItem(pinnedColorsKey, JSON.stringify(d)), B(d);\n          }\n        }\n      },\n      D = function (a) {\n        t(s ? null : a.currentTarget);\n      };\n    return useEffect(function () {\n      var a = 0 === j.length && p || f;\n      x(a), e(a);\n    }, [f, j]), React.createElement(React.Fragment, null, React.createElement(StyledPickerTrigger, {\n      className: \"FIE_color-picker-triggerer\",\n      onClick: D,\n      $color: w,\n      onChange: e\n    }), React.createElement(Popper, {\n      className: \"FIE_color-picker\",\n      anchorEl: s,\n      open: !!s,\n      position: d,\n      onClick: D,\n      overlay: !0,\n      zIndex: 11111\n    }, React.createElement(StyledColorPicker, {\n      onChange: function changeColor(a, b, c) {\n        x(b), e(b), C(c), p !== b && m({\n          type: SET_LATEST_COLOR,\n          payload: {\n            latestColors: _defineProperty({}, g, b)\n          }\n        });\n      },\n      defaultColor: w,\n      pinnedColors: A,\n      showTransparentColor: !0\n    })));\n  };\nColorInput.defaultProps = {\n  position: \"top\",\n  color: void 0\n};\nexport default ColorInput;","map":{"version":3,"names":["_defineProperty","_slicedToArray","React","useEffect","useState","Popper","useStore","SET_LATEST_COLOR","StyledColorPicker","StyledPickerTrigger","pinnedColorsKey","ColorInput","a","b","c","position","d","e","onChange","f","color","g","colorFor","h","i","selectionsIds","j","k","config","annotationsCommon","l","m","dispatch","n","latestColors","o","p","q","r","s","t","u","fill","v","w","x","y","window","localStorage","JSON","parse","getItem","z","A","B","C","stringify","slice","setItem","D","currentTarget","length","createElement","Fragment","className","onClick","$color","anchorEl","open","overlay","zIndex","changeColor","type","payload","defaultColor","pinnedColors","showTransparentColor","defaultProps"],"sources":["/home/redundunt/WebstormProjects/untitled/node_modules/react-filerobot-image-editor/lib/components/common/ColorInput/index.js"],"sourcesContent":["import _defineProperty from\"@babel/runtime/helpers/defineProperty\";import _slicedToArray from\"@babel/runtime/helpers/slicedToArray\";import React,{useEffect,useState}from\"react\";import Popper from\"@scaleflex/ui/core/popper\";import{useStore}from\"../../../hooks\";import{SET_LATEST_COLOR}from\"../../../actions\";import{StyledColorPicker,StyledPickerTrigger}from\"./ColorInput.styled\";var pinnedColorsKey=\"FIE_pinnedColors\",ColorInput=function(a){var b,c=a.position,d=void 0===c?\"top\":c,e=a.onChange,f=a.color,g=a.colorFor,h=useStore(),i=h.selectionsIds,j=void 0===i?[]:i,k=h.config.annotationsCommon,l=void 0===k?{}:k,m=h.dispatch,n=h.latestColors,o=void 0===n?{}:n,p=o[g],q=useState(),r=_slicedToArray(q,2),s=r[0],t=r[1],u=useState(function(){return p||f||l.fill}),v=_slicedToArray(u,2),w=v[0],x=v[1],y=useState(null!==(b=window)&&void 0!==b&&b.localStorage?JSON.parse(localStorage.getItem(pinnedColorsKey)||\"[]\"):[]),z=_slicedToArray(y,2),A=z[0],B=z[1],C=function(a){var b;if(null!==(b=window)&&void 0!==b&&b.localStorage){var c=window.localStorage.getItem(pinnedColorsKey);if(JSON.stringify(a)!==c){var d=a.slice(-9);window.localStorage.setItem(pinnedColorsKey,JSON.stringify(d)),B(d)}}},D=function(a){t(s?null:a.currentTarget)};return useEffect(function(){var a=0===j.length&&p||f;x(a),e(a)},[f,j]),React.createElement(React.Fragment,null,React.createElement(StyledPickerTrigger,{className:\"FIE_color-picker-triggerer\",onClick:D,$color:w,onChange:e}),React.createElement(Popper,{className:\"FIE_color-picker\",anchorEl:s,open:!!s,position:d,onClick:D,overlay:!0,zIndex:11111},React.createElement(StyledColorPicker,{onChange:function changeColor(a,b,c){x(b),e(b),C(c),p!==b&&m({type:SET_LATEST_COLOR,payload:{latestColors:_defineProperty({},g,b)}})},defaultColor:w,pinnedColors:A,showTransparentColor:!0})))};ColorInput.defaultProps={position:\"top\",color:void 0};export default ColorInput;"],"mappings":"AAAA,OAAOA,eAAe,MAAK,uCAAuC;AAAC,OAAOC,cAAc,MAAK,sCAAsC;AAAC,OAAOC,KAAK,IAAEC,SAAS,EAACC,QAAQ,QAAK,OAAO;AAAC,OAAOC,MAAM,MAAK,2BAA2B;AAAC,SAAOC,QAAQ,QAAK,gBAAgB;AAAC,SAAOC,gBAAgB,QAAK,kBAAkB;AAAC,SAAOC,iBAAiB,EAACC,mBAAmB,QAAK,qBAAqB;AAAC,IAAIC,eAAe,GAAC,kBAAkB;EAACC,UAAU,GAAC,SAAAA,CAASC,CAAC,EAAC;IAAC,IAAIC,CAAC;MAACC,CAAC,GAACF,CAAC,CAACG,QAAQ;MAACC,CAAC,GAAC,KAAK,CAAC,KAAGF,CAAC,GAAC,KAAK,GAACA,CAAC;MAACG,CAAC,GAACL,CAAC,CAACM,QAAQ;MAACC,CAAC,GAACP,CAAC,CAACQ,KAAK;MAACC,CAAC,GAACT,CAAC,CAACU,QAAQ;MAACC,CAAC,GAACjB,QAAQ,EAAE;MAACkB,CAAC,GAACD,CAAC,CAACE,aAAa;MAACC,CAAC,GAAC,KAAK,CAAC,KAAGF,CAAC,GAAC,EAAE,GAACA,CAAC;MAACG,CAAC,GAACJ,CAAC,CAACK,MAAM,CAACC,iBAAiB;MAACC,CAAC,GAAC,KAAK,CAAC,KAAGH,CAAC,GAAC,CAAC,CAAC,GAACA,CAAC;MAACI,CAAC,GAACR,CAAC,CAACS,QAAQ;MAACC,CAAC,GAACV,CAAC,CAACW,YAAY;MAACC,CAAC,GAAC,KAAK,CAAC,KAAGF,CAAC,GAAC,CAAC,CAAC,GAACA,CAAC;MAACG,CAAC,GAACD,CAAC,CAACd,CAAC,CAAC;MAACgB,CAAC,GAACjC,QAAQ,EAAE;MAACkC,CAAC,GAACrC,cAAc,CAACoC,CAAC,EAAC,CAAC,CAAC;MAACE,CAAC,GAACD,CAAC,CAAC,CAAC,CAAC;MAACE,CAAC,GAACF,CAAC,CAAC,CAAC,CAAC;MAACG,CAAC,GAACrC,QAAQ,CAAC,YAAU;QAAC,OAAOgC,CAAC,IAAEjB,CAAC,IAAEW,CAAC,CAACY,IAAI;MAAA,CAAC,CAAC;MAACC,CAAC,GAAC1C,cAAc,CAACwC,CAAC,EAAC,CAAC,CAAC;MAACG,CAAC,GAACD,CAAC,CAAC,CAAC,CAAC;MAACE,CAAC,GAACF,CAAC,CAAC,CAAC,CAAC;MAACG,CAAC,GAAC1C,QAAQ,CAAC,IAAI,MAAIS,CAAC,GAACkC,MAAM,CAAC,IAAE,KAAK,CAAC,KAAGlC,CAAC,IAAEA,CAAC,CAACmC,YAAY,GAACC,IAAI,CAACC,KAAK,CAACF,YAAY,CAACG,OAAO,CAACzC,eAAe,CAAC,IAAE,IAAI,CAAC,GAAC,EAAE,CAAC;MAAC0C,CAAC,GAACnD,cAAc,CAAC6C,CAAC,EAAC,CAAC,CAAC;MAACO,CAAC,GAACD,CAAC,CAAC,CAAC,CAAC;MAACE,CAAC,GAACF,CAAC,CAAC,CAAC,CAAC;MAACG,CAAC,GAAC,SAAAA,CAAS3C,CAAC,EAAC;QAAC,IAAIC,CAAC;QAAC,IAAG,IAAI,MAAIA,CAAC,GAACkC,MAAM,CAAC,IAAE,KAAK,CAAC,KAAGlC,CAAC,IAAEA,CAAC,CAACmC,YAAY,EAAC;UAAC,IAAIlC,CAAC,GAACiC,MAAM,CAACC,YAAY,CAACG,OAAO,CAACzC,eAAe,CAAC;UAAC,IAAGuC,IAAI,CAACO,SAAS,CAAC5C,CAAC,CAAC,KAAGE,CAAC,EAAC;YAAC,IAAIE,CAAC,GAACJ,CAAC,CAAC6C,KAAK,CAAC,CAAC,CAAC,CAAC;YAACV,MAAM,CAACC,YAAY,CAACU,OAAO,CAAChD,eAAe,EAACuC,IAAI,CAACO,SAAS,CAACxC,CAAC,CAAC,CAAC,EAACsC,CAAC,CAACtC,CAAC,CAAC;UAAA;QAAC;MAAC,CAAC;MAAC2C,CAAC,GAAC,SAAAA,CAAS/C,CAAC,EAAC;QAAC4B,CAAC,CAACD,CAAC,GAAC,IAAI,GAAC3B,CAAC,CAACgD,aAAa,CAAC;MAAA,CAAC;IAAC,OAAOzD,SAAS,CAAC,YAAU;MAAC,IAAIS,CAAC,GAAC,CAAC,KAAGc,CAAC,CAACmC,MAAM,IAAEzB,CAAC,IAAEjB,CAAC;MAAC0B,CAAC,CAACjC,CAAC,CAAC,EAACK,CAAC,CAACL,CAAC,CAAC;IAAA,CAAC,EAAC,CAACO,CAAC,EAACO,CAAC,CAAC,CAAC,EAACxB,KAAK,CAAC4D,aAAa,CAAC5D,KAAK,CAAC6D,QAAQ,EAAC,IAAI,EAAC7D,KAAK,CAAC4D,aAAa,CAACrD,mBAAmB,EAAC;MAACuD,SAAS,EAAC,4BAA4B;MAACC,OAAO,EAACN,CAAC;MAACO,MAAM,EAACtB,CAAC;MAAC1B,QAAQ,EAACD;IAAC,CAAC,CAAC,EAACf,KAAK,CAAC4D,aAAa,CAACzD,MAAM,EAAC;MAAC2D,SAAS,EAAC,kBAAkB;MAACG,QAAQ,EAAC5B,CAAC;MAAC6B,IAAI,EAAC,CAAC,CAAC7B,CAAC;MAACxB,QAAQ,EAACC,CAAC;MAACiD,OAAO,EAACN,CAAC;MAACU,OAAO,EAAC,CAAC,CAAC;MAACC,MAAM,EAAC;IAAK,CAAC,EAACpE,KAAK,CAAC4D,aAAa,CAACtD,iBAAiB,EAAC;MAACU,QAAQ,EAAC,SAASqD,WAAWA,CAAC3D,CAAC,EAACC,CAAC,EAACC,CAAC,EAAC;QAAC+B,CAAC,CAAChC,CAAC,CAAC,EAACI,CAAC,CAACJ,CAAC,CAAC,EAAC0C,CAAC,CAACzC,CAAC,CAAC,EAACsB,CAAC,KAAGvB,CAAC,IAAEkB,CAAC,CAAC;UAACyC,IAAI,EAACjE,gBAAgB;UAACkE,OAAO,EAAC;YAACvC,YAAY,EAAClC,eAAe,CAAC,CAAC,CAAC,EAACqB,CAAC,EAACR,CAAC;UAAC;QAAC,CAAC,CAAC;MAAA,CAAC;MAAC6D,YAAY,EAAC9B,CAAC;MAAC+B,YAAY,EAACtB,CAAC;MAACuB,oBAAoB,EAAC,CAAC;IAAC,CAAC,CAAC,CAAC,CAAC;EAAA,CAAC;AAACjE,UAAU,CAACkE,YAAY,GAAC;EAAC9D,QAAQ,EAAC,KAAK;EAACK,KAAK,EAAC,KAAK;AAAC,CAAC;AAAC,eAAeT,UAAU"},"metadata":{},"sourceType":"module","externalDependencies":[]}