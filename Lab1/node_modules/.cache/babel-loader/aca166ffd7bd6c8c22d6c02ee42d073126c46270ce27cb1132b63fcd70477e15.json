{"ast":null,"code":"/**\n * Module dependencies.\n */\n\nvar Stream = require('stream').Stream;\nvar EventEmitter = require('events').EventEmitter;\nvar util = require('util');\nutil.inherits(gm, EventEmitter);\n\n/**\n * Constructor.\n *\n * @param {String|Number} path - path to img source or ReadableStream or width of img to create\n * @param {Number} [height] - optional filename of ReadableStream or height of img to create\n * @param {String} [color] - optional hex background color of created img\n */\n\nfunction gm(source, height, color) {\n  var width;\n  if (!(this instanceof gm)) {\n    return new gm(source, height, color);\n  }\n  EventEmitter.call(this);\n  this._options = {};\n  this.options(this.__proto__._options);\n  this.data = {};\n  this._in = [];\n  this._out = [];\n  this._outputFormat = null;\n  this._subCommand = 'convert';\n  if (source instanceof Stream) {\n    this.sourceStream = source;\n    source = height || 'unknown.jpg';\n  } else if (Buffer.isBuffer(source)) {\n    this.sourceBuffer = source;\n    source = height || 'unknown.jpg';\n  } else if (height) {\n    // new images\n    width = source;\n    source = \"\";\n    this.in(\"-size\", width + \"x\" + height);\n    if (color) {\n      this.in(\"xc:\" + color);\n    }\n  }\n  if (typeof source === \"string\") {\n    // then source is a path\n\n    // parse out gif frame brackets from filename\n    // since stream doesn't use source path\n    // eg. \"filename.gif[0]\"\n    var frames = source.match(/(\\[.+\\])$/);\n    if (frames) {\n      this.sourceFrames = source.substr(frames.index, frames[0].length);\n      source = source.substr(0, frames.index);\n    }\n  }\n  this.source = source;\n  this.addSrcFormatter(function (src) {\n    // must be first source formatter\n\n    var inputFromStdin = this.sourceStream || this.sourceBuffer;\n    var ret = inputFromStdin ? '-' : this.source;\n    const fileNameProvied = typeof height === 'string';\n    if (inputFromStdin && fileNameProvied && /\\.ico$/i.test(this.source)) {\n      ret = `ico:-`;\n    }\n    if (ret && this.sourceFrames) ret += this.sourceFrames;\n    src.length = 0;\n    src[0] = ret;\n  });\n}\n\n/**\n * Subclasses the gm constructor with custom options.\n *\n * @param {options} options\n * @return {gm} the subclasses gm constructor\n */\n\nvar parent = gm;\ngm.subClass = function subClass(options) {\n  function gm(source, height, color) {\n    if (!(this instanceof parent)) {\n      return new gm(source, height, color);\n    }\n    parent.call(this, source, height, color);\n  }\n  gm.prototype.__proto__ = parent.prototype;\n  gm.prototype._options = {};\n  gm.prototype.options(options);\n  return gm;\n};\n\n/**\n * Augment the prototype.\n */\n\nrequire(\"./lib/options\")(gm.prototype);\nrequire(\"./lib/getters\")(gm);\nrequire(\"./lib/args\")(gm.prototype);\nrequire(\"./lib/drawing\")(gm.prototype);\nrequire(\"./lib/convenience\")(gm.prototype);\nrequire(\"./lib/command\")(gm.prototype);\nrequire(\"./lib/compare\")(gm.prototype);\nrequire(\"./lib/composite\")(gm.prototype);\nrequire(\"./lib/montage\")(gm.prototype);\n\n/**\n * Expose.\n */\n\nmodule.exports = exports = gm;\nmodule.exports.utils = require('./lib/utils');\nmodule.exports.compare = require('./lib/compare')();\nmodule.exports.version = require('./package.json').version;","map":{"version":3,"names":["Stream","require","EventEmitter","util","inherits","gm","source","height","color","width","call","_options","options","__proto__","data","_in","_out","_outputFormat","_subCommand","sourceStream","Buffer","isBuffer","sourceBuffer","in","frames","match","sourceFrames","substr","index","length","addSrcFormatter","src","inputFromStdin","ret","fileNameProvied","test","parent","subClass","prototype","module","exports","utils","compare","version"],"sources":["/home/redundunt/WebstormProjects/untitled/node_modules/gm/index.js"],"sourcesContent":["\n/**\n * Module dependencies.\n */\n\nvar Stream = require('stream').Stream;\nvar EventEmitter = require('events').EventEmitter;\nvar util = require('util');\n\nutil.inherits(gm, EventEmitter);\n\n/**\n * Constructor.\n *\n * @param {String|Number} path - path to img source or ReadableStream or width of img to create\n * @param {Number} [height] - optional filename of ReadableStream or height of img to create\n * @param {String} [color] - optional hex background color of created img\n */\n\nfunction gm (source, height, color) {\n  var width;\n\n  if (!(this instanceof gm)) {\n    return new gm(source, height, color);\n  }\n\n  EventEmitter.call(this);\n\n  this._options = {};\n  this.options(this.__proto__._options);\n\n  this.data = {};\n  this._in = [];\n  this._out = [];\n  this._outputFormat = null;\n  this._subCommand = 'convert';\n\n  if (source instanceof Stream) {\n    this.sourceStream = source;\n    source = height || 'unknown.jpg';\n  } else if (Buffer.isBuffer(source)) {\n    this.sourceBuffer = source;\n    source = height || 'unknown.jpg';\n  } else if (height) {\n    // new images\n    width = source;\n    source = \"\";\n\n    this.in(\"-size\", width + \"x\" + height);\n\n    if (color) {\n      this.in(\"xc:\"+ color);\n    }\n  }\n\n  if (typeof source === \"string\") {\n    // then source is a path\n\n    // parse out gif frame brackets from filename\n    // since stream doesn't use source path\n    // eg. \"filename.gif[0]\"\n    var frames = source.match(/(\\[.+\\])$/);\n    if (frames) {\n      this.sourceFrames = source.substr(frames.index, frames[0].length);\n      source = source.substr(0, frames.index);\n    }\n  }\n\n  this.source = source;\n\n  this.addSrcFormatter(function (src) {\n    // must be first source formatter\n\n    var inputFromStdin = this.sourceStream || this.sourceBuffer;\n    var ret = inputFromStdin ? '-' : this.source;\n\n    const fileNameProvied = typeof height === 'string';\n    if (inputFromStdin && fileNameProvied && /\\.ico$/i.test(this.source)) {\n      ret = `ico:-`;\n    }\n\n    if (ret && this.sourceFrames) ret += this.sourceFrames;\n\n    src.length = 0;\n    src[0] = ret;\n  });\n}\n\n/**\n * Subclasses the gm constructor with custom options.\n *\n * @param {options} options\n * @return {gm} the subclasses gm constructor\n */\n\nvar parent = gm;\ngm.subClass = function subClass (options) {\n  function gm (source, height, color) {\n    if (!(this instanceof parent)) {\n      return new gm(source, height, color);\n    }\n\n    parent.call(this, source, height, color);\n  }\n\n  gm.prototype.__proto__ = parent.prototype;\n  gm.prototype._options = {};\n  gm.prototype.options(options);\n\n  return gm;\n}\n\n/**\n * Augment the prototype.\n */\n\nrequire(\"./lib/options\")(gm.prototype);\nrequire(\"./lib/getters\")(gm);\nrequire(\"./lib/args\")(gm.prototype);\nrequire(\"./lib/drawing\")(gm.prototype);\nrequire(\"./lib/convenience\")(gm.prototype);\nrequire(\"./lib/command\")(gm.prototype);\nrequire(\"./lib/compare\")(gm.prototype);\nrequire(\"./lib/composite\")(gm.prototype);\nrequire(\"./lib/montage\")(gm.prototype);\n\n/**\n * Expose.\n */\n\nmodule.exports = exports = gm;\nmodule.exports.utils = require('./lib/utils');\nmodule.exports.compare = require('./lib/compare')();\nmodule.exports.version = require('./package.json').version;\n"],"mappings":"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"},"metadata":{},"sourceType":"script","externalDependencies":[]}