{"ast":null,"code":"import _slicedToArray from \"@babel/runtime/helpers/slicedToArray\";\nimport _defineProperty from \"@babel/runtime/helpers/defineProperty\";\nimport React, { useCallback, useEffect } from \"react\";\nimport MenuItem from \"@scaleflex/ui/core/menu-item\";\nimport FontBold from \"@scaleflex/icons/font-bold\";\nimport FontItalic from \"@scaleflex/icons/font-italic\";\nimport { TOOLS_IDS, TRANSFORMERS_LAYER_ID } from \"../../../../utils/constants\";\nimport AnnotationOptions from \"../../../common/AnnotationOptions\";\nimport { StyledIconWrapper } from \"../../../common/AnnotationOptions/AnnotationOptions.styled\";\nimport { ENABLE_TEXT_CONTENT_EDIT } from \"../../../../actions\";\nimport restrictNumber from \"../../../../utils/restrictNumber\";\nimport { useStore } from \"../../../../hooks\";\nimport { StyledFontFamilySelect, StyledFontSizeInput } from \"./TextOptions.styled\";\nimport { textOptionsPopupComponents, TEXT_POPPABLE_OPTIONS } from \"./TextOptions.constants\";\nimport { activateTextChange, deactivateTextChange } from \"./handleTextChangeArea\";\nvar TextControls = function (a) {\n  var b = a.text,\n    c = a.saveText,\n    d = a.children,\n    e = useStore(),\n    f = e.dispatch,\n    g = e.textIdOfEditableContent,\n    h = e.designLayer,\n    i = e.t,\n    j = e.config,\n    k = j.useCloudimage,\n    l = j[TOOLS_IDS.TEXT],\n    m = l.fonts,\n    n = void 0 === m ? [] : m,\n    o = l.onFontChange,\n    p = useCallback(function (a) {\n      var b = a.target,\n        d = b.name,\n        e = b.value,\n        f = b.type;\n      c(function (a) {\n        return _defineProperty({\n          id: a.id\n        }, d, \"number\" === f ? restrictNumber(e, 1, 500) : e);\n      });\n    }, [c]),\n    q = useCallback(function (a) {\n      if (p({\n        target: {\n          name: \"fontFamily\",\n          value: a\n        }\n      }), b.fontFamily !== a && \"function\" == typeof o) {\n        var c = h.draw.bind(h);\n        o(a, c);\n      }\n    }, [p, b, h]),\n    r = useCallback(function (a) {\n      var c,\n        d = (null === (c = b.fontStyle) || void 0 === c ? void 0 : c.replace(\"normal\", \"\").split(\" \")) || [];\n      0 < Object.keys(d).length && d.includes(a) ? d = d.filter(function (b) {\n        return b !== a;\n      }) : d.push(a), p({\n        target: {\n          name: \"fontStyle\",\n          value: d.join(\" \").trim() || \"normal\"\n        }\n      });\n    }, [b]),\n    s = useCallback(function () {\n      f({\n        type: ENABLE_TEXT_CONTENT_EDIT,\n        payload: {\n          textIdOfEditableContent: null\n        }\n      });\n    }, []),\n    t = useCallback(function (a) {\n      p({\n        target: {\n          name: \"text\",\n          value: a\n        }\n      }), s();\n    }, []);\n  return useEffect(function () {\n    var a;\n    if (g && b.id === g) {\n      var c = h.getStage(),\n        d = _slicedToArray(c.findOne(\"#\".concat(TRANSFORMERS_LAYER_ID)).children, 1);\n      a = d[0], activateTextChange(g, c, a, t, s);\n    }\n    return function () {\n      a && g && deactivateTextChange();\n    };\n  }, [g]), React.createElement(AnnotationOptions, {\n    className: \"FIE_text-tool-options\",\n    annotation: b,\n    updateAnnotation: c,\n    morePoppableOptionsPrepended: k ? [] : TEXT_POPPABLE_OPTIONS,\n    moreOptionsPopupComponentsObj: k ? {} : textOptionsPopupComponents,\n    t: i\n  }, Array.isArray(n) && 1 < n.length && React.createElement(StyledFontFamilySelect, {\n    className: \"FIE_text-font-family-option\",\n    onChange: q,\n    value: b.fontFamily,\n    placeholder: i(\"fontFamily\"),\n    size: \"sm\"\n  }, n.map(function () {\n    var a,\n      b,\n      c,\n      d = 0 < arguments.length && void 0 !== arguments[0] ? arguments[0] : \"\";\n    return React.createElement(MenuItem, {\n      className: \"FIE_text-font-family-item\",\n      key: null !== (a = d.value) && void 0 !== a ? a : d,\n      value: null !== (b = d.value) && void 0 !== b ? b : d\n    }, null !== (c = d.label) && void 0 !== c ? c : d);\n  })), React.createElement(StyledFontSizeInput, {\n    className: \"FIE_text-size-option\",\n    value: b.fontSize || \"\",\n    name: \"fontSize\",\n    onChange: p,\n    inputMode: \"numeric\",\n    type: \"number\",\n    size: \"sm\",\n    placeholder: i(\"size\")\n  }), !k && React.createElement(React.Fragment, null, React.createElement(StyledIconWrapper, {\n    className: \"FIE_text-bold-option\",\n    \"aria-selected\": (b.fontStyle || \"\").includes(\"bold\"),\n    onClick: function onClick() {\n      return r(\"bold\");\n    }\n  }, React.createElement(FontBold, null)), React.createElement(StyledIconWrapper, {\n    className: \"FIE_text-italic-option\",\n    \"aria-selected\": (b.fontStyle || \"\").includes(\"italic\"),\n    onClick: function onClick() {\n      return r(\"italic\");\n    }\n  }, React.createElement(FontItalic, null))), d);\n};\nTextControls.defaultProps = {\n  children: null\n};\nexport default TextControls;","map":{"version":3,"names":["_slicedToArray","_defineProperty","React","useCallback","useEffect","MenuItem","FontBold","FontItalic","TOOLS_IDS","TRANSFORMERS_LAYER_ID","AnnotationOptions","StyledIconWrapper","ENABLE_TEXT_CONTENT_EDIT","restrictNumber","useStore","StyledFontFamilySelect","StyledFontSizeInput","textOptionsPopupComponents","TEXT_POPPABLE_OPTIONS","activateTextChange","deactivateTextChange","TextControls","a","b","text","c","saveText","d","children","e","f","dispatch","g","textIdOfEditableContent","h","designLayer","i","t","j","config","k","useCloudimage","l","TEXT","m","fonts","n","o","onFontChange","p","target","name","value","type","id","q","fontFamily","draw","bind","r","fontStyle","replace","split","Object","keys","length","includes","filter","push","join","trim","s","payload","getStage","findOne","concat","createElement","className","annotation","updateAnnotation","morePoppableOptionsPrepended","moreOptionsPopupComponentsObj","Array","isArray","onChange","placeholder","size","map","arguments","key","label","fontSize","inputMode","Fragment","onClick","defaultProps"],"sources":["/home/redundunt/WebstormProjects/untitled/node_modules/react-filerobot-image-editor/lib/components/tools/Text/TextOptions/TextControls.js"],"sourcesContent":["import _slicedToArray from\"@babel/runtime/helpers/slicedToArray\";import _defineProperty from\"@babel/runtime/helpers/defineProperty\";import React,{useCallback,useEffect}from\"react\";import MenuItem from\"@scaleflex/ui/core/menu-item\";import FontBold from\"@scaleflex/icons/font-bold\";import FontItalic from\"@scaleflex/icons/font-italic\";import{TOOLS_IDS,TRANSFORMERS_LAYER_ID}from\"../../../../utils/constants\";import AnnotationOptions from\"../../../common/AnnotationOptions\";import{StyledIconWrapper}from\"../../../common/AnnotationOptions/AnnotationOptions.styled\";import{ENABLE_TEXT_CONTENT_EDIT}from\"../../../../actions\";import restrictNumber from\"../../../../utils/restrictNumber\";import{useStore}from\"../../../../hooks\";import{StyledFontFamilySelect,StyledFontSizeInput}from\"./TextOptions.styled\";import{textOptionsPopupComponents,TEXT_POPPABLE_OPTIONS}from\"./TextOptions.constants\";import{activateTextChange,deactivateTextChange}from\"./handleTextChangeArea\";var TextControls=function(a){var b=a.text,c=a.saveText,d=a.children,e=useStore(),f=e.dispatch,g=e.textIdOfEditableContent,h=e.designLayer,i=e.t,j=e.config,k=j.useCloudimage,l=j[TOOLS_IDS.TEXT],m=l.fonts,n=void 0===m?[]:m,o=l.onFontChange,p=useCallback(function(a){var b=a.target,d=b.name,e=b.value,f=b.type;c(function(a){return _defineProperty({id:a.id},d,\"number\"===f?restrictNumber(e,1,500):e)})},[c]),q=useCallback(function(a){if(p({target:{name:\"fontFamily\",value:a}}),b.fontFamily!==a&&\"function\"==typeof o){var c=h.draw.bind(h);o(a,c)}},[p,b,h]),r=useCallback(function(a){var c,d=(null===(c=b.fontStyle)||void 0===c?void 0:c.replace(\"normal\",\"\").split(\" \"))||[];0<Object.keys(d).length&&d.includes(a)?d=d.filter(function(b){return b!==a}):d.push(a),p({target:{name:\"fontStyle\",value:d.join(\" \").trim()||\"normal\"}})},[b]),s=useCallback(function(){f({type:ENABLE_TEXT_CONTENT_EDIT,payload:{textIdOfEditableContent:null}})},[]),t=useCallback(function(a){p({target:{name:\"text\",value:a}}),s()},[]);return useEffect(function(){var a;if(g&&b.id===g){var c=h.getStage(),d=_slicedToArray(c.findOne(\"#\".concat(TRANSFORMERS_LAYER_ID)).children,1);a=d[0],activateTextChange(g,c,a,t,s)}return function(){a&&g&&deactivateTextChange()}},[g]),React.createElement(AnnotationOptions,{className:\"FIE_text-tool-options\",annotation:b,updateAnnotation:c,morePoppableOptionsPrepended:k?[]:TEXT_POPPABLE_OPTIONS,moreOptionsPopupComponentsObj:k?{}:textOptionsPopupComponents,t:i},Array.isArray(n)&&1<n.length&&React.createElement(StyledFontFamilySelect,{className:\"FIE_text-font-family-option\",onChange:q,value:b.fontFamily,placeholder:i(\"fontFamily\"),size:\"sm\"},n.map(function(){var a,b,c,d=0<arguments.length&&void 0!==arguments[0]?arguments[0]:\"\";return React.createElement(MenuItem,{className:\"FIE_text-font-family-item\",key:null!==(a=d.value)&&void 0!==a?a:d,value:null!==(b=d.value)&&void 0!==b?b:d},null!==(c=d.label)&&void 0!==c?c:d)})),React.createElement(StyledFontSizeInput,{className:\"FIE_text-size-option\",value:b.fontSize||\"\",name:\"fontSize\",onChange:p,inputMode:\"numeric\",type:\"number\",size:\"sm\",placeholder:i(\"size\")}),!k&&React.createElement(React.Fragment,null,React.createElement(StyledIconWrapper,{className:\"FIE_text-bold-option\",\"aria-selected\":(b.fontStyle||\"\").includes(\"bold\"),onClick:function onClick(){return r(\"bold\")}},React.createElement(FontBold,null)),React.createElement(StyledIconWrapper,{className:\"FIE_text-italic-option\",\"aria-selected\":(b.fontStyle||\"\").includes(\"italic\"),onClick:function onClick(){return r(\"italic\")}},React.createElement(FontItalic,null))),d)};TextControls.defaultProps={children:null};export default TextControls;"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}