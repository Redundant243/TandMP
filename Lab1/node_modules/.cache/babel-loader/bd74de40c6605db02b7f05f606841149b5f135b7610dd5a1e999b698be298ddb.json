{"ast":null,"code":"var textarea,\n  textNode,\n  transformer,\n  editFinishCallback,\n  disableTextEditCallback,\n  handleOutsideClick = function (a) {\n    if (a.target !== textarea) {\n      var b = textarea.value;\n      deactivateTextChange(), editFinishCallback(b);\n    }\n  },\n  deactivateTextChange = function () {\n    textarea && textarea.remove(textarea), window && window.removeEventListener(\"click\", handleOutsideClick), textNode && textNode.show(), transformer && (transformer.show(), transformer.forceUpdate()), \"function\" == typeof disableTextEditCallback && disableTextEditCallback(), textNode = null, textarea = null, transformer = null;\n  },\n  activateTextChange = function (a, b, c, d, e) {\n    function f(a) {\n      var b = a;\n      b || (b = textNode.placeholder.length * textNode.fontSize());\n      var c = /^((?!chrome|android).)*safari/i.test(navigator.userAgent);\n      (c || k) && (b = Math.ceil(b));\n      var d = document.documentMode || /Edge/.test(navigator.userAgent);\n      d && (b += 1), textarea.style.width = \"\".concat(b, \"px\");\n    }\n    editFinishCallback = d, disableTextEditCallback = e, transformer = c, textNode = b.findOne(\"#\".concat(a)), textNode.hide(), transformer.hide();\n    var g = textNode.absolutePosition();\n    textarea = document.createElement(\"textarea\"), b.container().parentNode.appendChild(textarea), textarea.value = textNode.text(), textarea.style.position = \"absolute\", textarea.style.top = \"\".concat(g.y, \"px\"), textarea.style.left = \"\".concat(g.x, \"px\"), textarea.style.width = \"\".concat(textNode.width() - 2 * textNode.padding(), \"px\"), textarea.style.height = \"\".concat(textNode.height() - 2 * textNode.padding() + 5, \"px\"), textarea.style.maxWidth = \"\".concat(textNode.width() - 2 * textNode.padding(), \"px\"), textarea.style.maxHeight = \"\".concat(textNode.height() - 2 * textNode.padding() + 5, \"px\"), textarea.style.fontSize = \"\".concat(textNode.fontSize(), \"px\"), textarea.style.border = \"1px solid rgba(0, 0, 0, 0.5)\", textarea.style.padding = \"0px\", textarea.style.margin = \"0px\", textarea.style.overflow = \"hidden\", textarea.style.background = \"none\", textarea.style.outline = \"none\", textarea.style.resize = \"none\", textarea.style.lineHeight = textNode.lineHeight(), textarea.style.fontFamily = textNode.fontFamily(), textarea.style.transformOrigin = \"left top\", textarea.style.textAlign = textNode.align(), textarea.style.fontStyle = textNode.fontStyle(), textarea.style.letterSpacing = textNode.letterSpacing(), textarea.style.lineHeight = textNode.lineHeight(), textarea.style.color = textNode.fill();\n    var h = textNode.rotation(),\n      i = \"\";\n    h && (i += \"rotateZ(\".concat(h, \"deg)\"));\n    var j = 0,\n      k = -1 < navigator.userAgent.toLowerCase().indexOf(\"firefox\");\n    k && (j += 2 + Math.round(textNode.fontSize() / 20)), i += \"translateY(-\".concat(j, \"px)\"), textarea.style.transform = i, textarea.style.height = \"auto\", textarea.style.height = \"\".concat(textarea.scrollHeight + 3, \"px\"), textarea.focus(), textarea.addEventListener(\"keydown\", function (a) {\n      if (\"Enter\" === a.key && !a.shiftKey) {\n        var b = textarea.value;\n        deactivateTextChange(), editFinishCallback(b);\n      }\n      \"Escape\" === a.key && deactivateTextChange();\n    }), textarea.addEventListener(\"keydown\", function (a) {\n      if (\"Enter\" !== a.key && \"Escape\" !== a.key) {\n        var b = textNode.getAbsoluteScale().x;\n        f(textNode.width() * b), textarea.style.height = \"auto\", textarea.style.height = \"\".concat(textarea.scrollHeight + textNode.fontSize(), \"px\");\n      }\n    }), window && setTimeout(function () {\n      window.addEventListener(\"click\", handleOutsideClick);\n    });\n  };\nexport { activateTextChange, deactivateTextChange };","map":{"version":3,"names":["textarea","textNode","transformer","editFinishCallback","disableTextEditCallback","handleOutsideClick","a","target","b","value","deactivateTextChange","remove","window","removeEventListener","show","forceUpdate","activateTextChange","c","d","e","f","placeholder","length","fontSize","test","navigator","userAgent","k","Math","ceil","document","documentMode","style","width","concat","findOne","hide","g","absolutePosition","createElement","container","parentNode","appendChild","text","position","top","y","left","x","padding","height","maxWidth","maxHeight","border","margin","overflow","background","outline","resize","lineHeight","fontFamily","transformOrigin","textAlign","align","fontStyle","letterSpacing","color","fill","h","rotation","i","j","toLowerCase","indexOf","round","transform","scrollHeight","focus","addEventListener","key","shiftKey","getAbsoluteScale","setTimeout"],"sources":["/home/redundunt/WebstormProjects/untitled/node_modules/react-filerobot-image-editor/lib/components/tools/Text/TextOptions/handleTextChangeArea.js"],"sourcesContent":["var textarea,textNode,transformer,editFinishCallback,disableTextEditCallback,handleOutsideClick=function(a){if(a.target!==textarea){var b=textarea.value;deactivateTextChange(),editFinishCallback(b)}},deactivateTextChange=function(){textarea&&textarea.remove(textarea),window&&window.removeEventListener(\"click\",handleOutsideClick),textNode&&textNode.show(),transformer&&(transformer.show(),transformer.forceUpdate()),\"function\"==typeof disableTextEditCallback&&disableTextEditCallback(),textNode=null,textarea=null,transformer=null},activateTextChange=function(a,b,c,d,e){function f(a){var b=a;b||(b=textNode.placeholder.length*textNode.fontSize());var c=/^((?!chrome|android).)*safari/i.test(navigator.userAgent);(c||k)&&(b=Math.ceil(b));var d=document.documentMode||/Edge/.test(navigator.userAgent);d&&(b+=1),textarea.style.width=\"\".concat(b,\"px\")}editFinishCallback=d,disableTextEditCallback=e,transformer=c,textNode=b.findOne(\"#\".concat(a)),textNode.hide(),transformer.hide();var g=textNode.absolutePosition();textarea=document.createElement(\"textarea\"),b.container().parentNode.appendChild(textarea),textarea.value=textNode.text(),textarea.style.position=\"absolute\",textarea.style.top=\"\".concat(g.y,\"px\"),textarea.style.left=\"\".concat(g.x,\"px\"),textarea.style.width=\"\".concat(textNode.width()-2*textNode.padding(),\"px\"),textarea.style.height=\"\".concat(textNode.height()-2*textNode.padding()+5,\"px\"),textarea.style.maxWidth=\"\".concat(textNode.width()-2*textNode.padding(),\"px\"),textarea.style.maxHeight=\"\".concat(textNode.height()-2*textNode.padding()+5,\"px\"),textarea.style.fontSize=\"\".concat(textNode.fontSize(),\"px\"),textarea.style.border=\"1px solid rgba(0, 0, 0, 0.5)\",textarea.style.padding=\"0px\",textarea.style.margin=\"0px\",textarea.style.overflow=\"hidden\",textarea.style.background=\"none\",textarea.style.outline=\"none\",textarea.style.resize=\"none\",textarea.style.lineHeight=textNode.lineHeight(),textarea.style.fontFamily=textNode.fontFamily(),textarea.style.transformOrigin=\"left top\",textarea.style.textAlign=textNode.align(),textarea.style.fontStyle=textNode.fontStyle(),textarea.style.letterSpacing=textNode.letterSpacing(),textarea.style.lineHeight=textNode.lineHeight(),textarea.style.color=textNode.fill();var h=textNode.rotation(),i=\"\";h&&(i+=\"rotateZ(\".concat(h,\"deg)\"));var j=0,k=-1<navigator.userAgent.toLowerCase().indexOf(\"firefox\");k&&(j+=2+Math.round(textNode.fontSize()/20)),i+=\"translateY(-\".concat(j,\"px)\"),textarea.style.transform=i,textarea.style.height=\"auto\",textarea.style.height=\"\".concat(textarea.scrollHeight+3,\"px\"),textarea.focus(),textarea.addEventListener(\"keydown\",function(a){if(\"Enter\"===a.key&&!a.shiftKey){var b=textarea.value;deactivateTextChange(),editFinishCallback(b)}\"Escape\"===a.key&&deactivateTextChange()}),textarea.addEventListener(\"keydown\",function(a){if(\"Enter\"!==a.key&&\"Escape\"!==a.key){var b=textNode.getAbsoluteScale().x;f(textNode.width()*b),textarea.style.height=\"auto\",textarea.style.height=\"\".concat(textarea.scrollHeight+textNode.fontSize(),\"px\")}}),window&&setTimeout(function(){window.addEventListener(\"click\",handleOutsideClick)})};export{activateTextChange,deactivateTextChange};"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}