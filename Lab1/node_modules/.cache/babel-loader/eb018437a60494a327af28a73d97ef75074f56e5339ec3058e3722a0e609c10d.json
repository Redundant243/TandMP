{"ast":null,"code":"import _slicedToArray from \"@babel/runtime/helpers/slicedToArray\";\nimport React, { useRef, useState } from \"react\";\nimport Button from \"@scaleflex/ui/core/button\";\nimport { useAnnotation, useStore } from \"../../../hooks\";\nimport { FEEDBACK_STATUSES, TOOLS_IDS } from \"../../../utils/constants\";\nimport { SET_FEEDBACK } from \"../../../actions\";\nimport HiddenUploadInput from \"../../common/HiddenUploadInput\";\nimport ImageControls from \"./ImageControls\";\nvar ADDED_IMG_SPACING_PERCENT = .15,\n  ImageOptions = function () {\n    var a = useState(),\n      b = _slicedToArray(a, 2),\n      c = b[0],\n      d = b[1],\n      e = useRef(),\n      f = useStore(),\n      g = f.shownImageDimensions,\n      h = f.dispatch,\n      i = f.adjustments.crop,\n      j = void 0 === i ? {} : i,\n      k = f.t,\n      l = useAnnotation({\n        name: TOOLS_IDS.IMAGE,\n        opacity: 1\n      }, !1),\n      m = _slicedToArray(l, 3),\n      n = m[0],\n      o = m[1],\n      p = m[2],\n      q = useRef(0),\n      r = function (a) {\n        var b = j.width || g.width,\n          c = j.height || g.height,\n          d = j.x || 0,\n          e = j.y || 0,\n          f = Math.min(1, b / (a.width + a.width * ADDED_IMG_SPACING_PERCENT), c / (a.height + a.height * ADDED_IMG_SPACING_PERCENT));\n        p({\n          image: a,\n          x: d + b / 2 - a.width * f / 2,\n          y: e + c / 2 - a.height * f / 2,\n          width: a.width * f,\n          height: a.height * f\n        });\n      },\n      s = function (a) {\n        q.current += 1, q.current === a && (q.current = 0, d(!1));\n      },\n      t = function (a) {\n        h({\n          type: SET_FEEDBACK,\n          payload: {\n            feedback: {\n              message: a,\n              status: FEEDBACK_STATUSES.WARNING\n            }\n          }\n        });\n      };\n    return React.createElement(ImageControls, {\n      image: n,\n      saveImage: o,\n      t: k\n    }, React.createElement(Button, {\n      className: \"FIE_image-tool-add-option\",\n      color: \"secondary\",\n      onClick: c ? void 0 : function triggerUploadInput() {\n        e.current && e.current.click();\n      },\n      disabled: c,\n      size: \"sm\",\n      style: {\n        maxHeight: 24\n      }\n    }, c ? k(\"importing\") : k(\"addImage\")), React.createElement(HiddenUploadInput, {\n      ref: e,\n      onChange: c ? void 0 : function importImages(a) {\n        if (a.target.files) {\n          d(!0);\n          var b = [],\n            c = Array.from(a.target.files),\n            e = c.length;\n          if (c.forEach(function (a) {\n            if (a.type.startsWith(\"image/\")) {\n              var c = new Image();\n              c.onload = function () {\n                r(c), URL.revokeObjectURL(a), s(e);\n              }, c.onerror = function () {\n                t(k(\"uploadImageError\")), s(e);\n              }, c.src = URL.createObjectURL(a);\n            } else b.push(a.name), s(e);\n          }), 0 < b.length) {\n            var f = 1 < b.length ? k(\"areNotImages\") : k(\"isNotImage\");\n            t(\"\".concat(b.join(\", \"), \" \").concat(f, \" \").concat(k(\"toBeUploaded\"), \".\"));\n          }\n        }\n        a.target.value = \"\";\n      },\n      disabled: c,\n      multiple: !0\n    }));\n  };\nexport default ImageOptions;","map":{"version":3,"names":["_slicedToArray","React","useRef","useState","Button","useAnnotation","useStore","FEEDBACK_STATUSES","TOOLS_IDS","SET_FEEDBACK","HiddenUploadInput","ImageControls","ADDED_IMG_SPACING_PERCENT","ImageOptions","a","b","c","d","e","f","g","shownImageDimensions","h","dispatch","i","adjustments","crop","j","k","t","l","name","IMAGE","opacity","m","n","o","p","q","r","width","height","x","y","Math","min","image","s","current","type","payload","feedback","message","status","WARNING","createElement","saveImage","className","color","onClick","triggerUploadInput","click","disabled","size","style","maxHeight","ref","onChange","importImages","target","files","Array","from","length","forEach","startsWith","Image","onload","URL","revokeObjectURL","onerror","src","createObjectURL","push","concat","join","value","multiple"],"sources":["/home/redundunt/WebstormProjects/untitled/node_modules/react-filerobot-image-editor/lib/components/tools/Image/ImageOptions.js"],"sourcesContent":["import _slicedToArray from\"@babel/runtime/helpers/slicedToArray\";import React,{useRef,useState}from\"react\";import Button from\"@scaleflex/ui/core/button\";import{useAnnotation,useStore}from\"../../../hooks\";import{FEEDBACK_STATUSES,TOOLS_IDS}from\"../../../utils/constants\";import{SET_FEEDBACK}from\"../../../actions\";import HiddenUploadInput from\"../../common/HiddenUploadInput\";import ImageControls from\"./ImageControls\";var ADDED_IMG_SPACING_PERCENT=.15,ImageOptions=function(){var a=useState(),b=_slicedToArray(a,2),c=b[0],d=b[1],e=useRef(),f=useStore(),g=f.shownImageDimensions,h=f.dispatch,i=f.adjustments.crop,j=void 0===i?{}:i,k=f.t,l=useAnnotation({name:TOOLS_IDS.IMAGE,opacity:1},!1),m=_slicedToArray(l,3),n=m[0],o=m[1],p=m[2],q=useRef(0),r=function(a){var b=j.width||g.width,c=j.height||g.height,d=j.x||0,e=j.y||0,f=Math.min(1,b/(a.width+a.width*ADDED_IMG_SPACING_PERCENT),c/(a.height+a.height*ADDED_IMG_SPACING_PERCENT));p({image:a,x:d+b/2-a.width*f/2,y:e+c/2-a.height*f/2,width:a.width*f,height:a.height*f})},s=function(a){q.current+=1,q.current===a&&(q.current=0,d(!1))},t=function(a){h({type:SET_FEEDBACK,payload:{feedback:{message:a,status:FEEDBACK_STATUSES.WARNING}}})};return React.createElement(ImageControls,{image:n,saveImage:o,t:k},React.createElement(Button,{className:\"FIE_image-tool-add-option\",color:\"secondary\",onClick:c?void 0:function triggerUploadInput(){e.current&&e.current.click()},disabled:c,size:\"sm\",style:{maxHeight:24}},c?k(\"importing\"):k(\"addImage\")),React.createElement(HiddenUploadInput,{ref:e,onChange:c?void 0:function importImages(a){if(a.target.files){d(!0);var b=[],c=Array.from(a.target.files),e=c.length;if(c.forEach(function(a){if(a.type.startsWith(\"image/\")){var c=new Image;c.onload=function(){r(c),URL.revokeObjectURL(a),s(e)},c.onerror=function(){t(k(\"uploadImageError\")),s(e)},c.src=URL.createObjectURL(a)}else b.push(a.name),s(e)}),0<b.length){var f=1<b.length?k(\"areNotImages\"):k(\"isNotImage\");t(\"\".concat(b.join(\", \"),\" \").concat(f,\" \").concat(k(\"toBeUploaded\"),\".\"))}}a.target.value=\"\"},disabled:c,multiple:!0}))};export default ImageOptions;"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}